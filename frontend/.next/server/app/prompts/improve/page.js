(()=>{var e={};e.id=65,e.ids=[65],e.modules={846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},9121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},9294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},3033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},3873:e=>{"use strict";e.exports=require("path")},9551:e=>{"use strict";e.exports=require("url")},5506:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>n.a,__next_app__:()=>m,pages:()=>c,routeModule:()=>p,tree:()=>l});var r=s(260),a=s(8203),i=s(5155),n=s.n(i),o=s(7292),d={};for(let e in o)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>o[e]);s.d(t,d);let l=["",{children:["prompts",{children:["improve",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,1066)),"/Users/shraddharao/Development/code/Work/headstarter/Self-Improving-Prompt-Optimization-API/frontend/src/app/prompts/improve/page.tsx"]}]},{}]},{metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(s.bind(s,1354)),"/Users/shraddharao/Development/code/Work/headstarter/Self-Improving-Prompt-Optimization-API/frontend/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,9937,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(s.t.bind(s,9116,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(s.t.bind(s,1485,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],c=["/Users/shraddharao/Development/code/Work/headstarter/Self-Improving-Prompt-Optimization-API/frontend/src/app/prompts/improve/page.tsx"],m={require:s,loadChunk:()=>Promise.resolve()},p=new r.AppPageRouteModule({definition:{kind:a.RouteKind.APP_PAGE,page:"/prompts/improve/page",pathname:"/prompts/improve",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:l}})},5054:(e,t,s)=>{Promise.resolve().then(s.bind(s,1066))},7750:(e,t,s)=>{Promise.resolve().then(s.bind(s,7974))},7974:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>b});var r=s(5512),a=s(8009),i=s(9334),n=s(3612),o=s(9400),d=s(4590),l=s(7722),c=s(7271),m=s(3623),p=s(6162),x=s(1894),h=s(7682),u=s(6753),v=s(8531),f=s.n(v);function j(){(0,i.useSearchParams)();let[e,t]=(0,a.useState)(""),[s,v]=(0,a.useState)(""),[j,b]=(0,a.useState)([]),[N,g]=(0,a.useState)([]),[w,_]=(0,a.useState)(null),[y,z]=(0,a.useState)(null),[P,S]=(0,a.useState)(!1),[I,k]=(0,a.useState)(!1),[A,C]=(0,a.useState)(!1),{toast:D}=(0,m.dj)(),R=async()=>{if(!e){D({title:"Error",description:"Please enter a prompt name",variant:"destructive"});return}try{S(!0);let t={dataset_id:s?parseInt(s):void 0,improvement_threshold:.05,max_candidates:3},r=await n.u.evaluations.improve(e,t);_(r),D({title:"Success",description:`Improvement process completed. Decision: ${r.promotion_decision}`})}catch(e){D({title:"Error",description:e instanceof Error?e.message:"Failed to improve prompt",variant:"destructive"})}finally{S(!1)}};return(0,r.jsx)("div",{className:"min-h-screen bg-gradient-to-b from-zinc-900 to-black",children:(0,r.jsxs)("div",{className:"mx-auto max-w-4xl px-4 py-12 sm:px-6 lg:px-8",children:[(0,r.jsxs)(f(),{href:"/prompts",className:"mb-6 inline-flex items-center text-zinc-400 hover:text-white",children:[(0,r.jsx)(x.A,{className:"mr-2 h-4 w-4"}),"Back to Prompts"]}),(0,r.jsx)("h1",{className:"mb-8 text-3xl font-bold text-white",children:"Improve Prompt"}),(0,r.jsx)(d.Zp,{className:"mb-8 p-6",children:(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(c.J,{htmlFor:"promptName",className:"text-white",children:"Prompt *"}),A?(0,r.jsx)("div",{className:"mt-1 p-2 bg-zinc-800 text-zinc-400 rounded-md",children:"Loading prompts..."}):j.length>0?(0,r.jsxs)("select",{id:"promptName",value:e,onChange:e=>t(e.target.value),className:"mt-1 w-full rounded-md bg-zinc-800 p-2 text-white",required:!0,children:[(0,r.jsx)("option",{value:"",children:"Select a prompt..."}),j.map(e=>(0,r.jsxs)("option",{value:e.name,children:[e.name," (v",e.version,") - ",e.status]},e.id))]}):(0,r.jsx)(l.p,{id:"promptName",value:e,onChange:e=>t(e.target.value),placeholder:"e.g., sentiment_analyzer",className:"mt-1 bg-zinc-800 text-white",required:!0}),(0,r.jsx)("p",{className:"mt-1 text-xs text-zinc-500",children:"Select a prompt to improve"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(c.J,{htmlFor:"datasetId",className:"text-white",children:"Dataset (optional)"}),N.length>0?(0,r.jsxs)("select",{id:"datasetId",value:s,onChange:e=>v(e.target.value),className:"mt-1 w-full rounded-md bg-zinc-800 p-2 text-white",children:[(0,r.jsx)("option",{value:"",children:"No dataset (use default test cases)"}),N.map(e=>(0,r.jsxs)("option",{value:e.id.toString(),children:[e.name," (",e.entry_count," entries)",e.description&&` - ${e.description}`]},e.id))]}):(0,r.jsx)("div",{className:"mt-1 p-3 bg-zinc-900/50 border border-zinc-800 rounded-md",children:(0,r.jsx)("p",{className:"text-sm text-zinc-400",children:"No datasets available. You can improve without a dataset, or create one first."})}),(0,r.jsx)("p",{className:"mt-1 text-xs text-zinc-500",children:"Optional: Select a dataset to evaluate against. If not selected, default test cases will be used."})]}),(0,r.jsx)("div",{className:"p-4 bg-blue-950/20 border border-blue-500/30 rounded",children:(0,r.jsxs)("p",{className:"text-sm text-blue-300",children:[(0,r.jsx)("strong",{children:"Note:"})," This will generate candidate prompts, evaluate them against the dataset, and automatically promote the best candidate if it meets the improvement threshold."]})}),(0,r.jsxs)(o.$,{onClick:R,disabled:P,className:"w-full bg-white text-black hover:bg-zinc-200",children:[(0,r.jsx)(h.A,{className:"mr-2 h-4 w-4"}),P?"Improving...":"Start Improvement"]})]})}),w&&(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)(d.Zp,{children:[(0,r.jsx)(d.aR,{children:(0,r.jsx)(d.ZB,{className:"text-white",children:"Improvement Summary"})}),(0,r.jsx)(d.Wu,{children:(0,r.jsxs)("div",{className:"grid md:grid-cols-2 gap-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h4",{className:"text-sm font-semibold text-zinc-400 mb-2",children:"Baseline"}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)("p",{className:"text-sm text-white",children:["Version: ",(0,r.jsx)("span",{className:"text-zinc-400",children:w.baseline_version})]}),void 0!==w.baseline_score&&(0,r.jsxs)("p",{className:"text-sm text-white",children:["Score: ",(0,r.jsx)("span",{className:"text-zinc-400",children:w.baseline_score.toFixed(3)})]})]})]}),w.best_candidate_id&&(0,r.jsxs)("div",{children:[(0,r.jsx)("h4",{className:"text-sm font-semibold text-zinc-400 mb-2",children:"Best Candidate"}),(0,r.jsxs)("div",{className:"space-y-2",children:[w.best_candidate_version&&(0,r.jsxs)("p",{className:"text-sm text-white",children:["Version: ",(0,r.jsx)("span",{className:"text-zinc-400",children:w.best_candidate_version})]}),void 0!==w.best_candidate_score&&(0,r.jsxs)("p",{className:"text-sm text-white",children:["Score: ",(0,r.jsx)("span",{className:"text-zinc-400",children:w.best_candidate_score.toFixed(3)})]}),void 0!==w.improvement_delta&&(0,r.jsxs)("p",{className:"text-sm text-white",children:["Improvement: ",(0,r.jsxs)("span",{className:w.improvement_delta>0?"text-green-400":"text-red-400",children:[w.improvement_delta>0?"+":"",w.improvement_delta.toFixed(3)]})]})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h4",{className:"text-sm font-semibold text-zinc-400 mb-2",children:"Candidates"}),(0,r.jsxs)("p",{className:"text-sm text-white",children:["Generated: ",(0,r.jsx)("span",{className:"text-zinc-400",children:w.candidates_generated})]}),(0,r.jsxs)("p",{className:"text-sm text-white",children:["Evaluated: ",(0,r.jsx)("span",{className:"text-zinc-400",children:w.candidates_evaluated})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h4",{className:"text-sm font-semibold text-zinc-400 mb-2",children:"Decision"}),(0,r.jsxs)("p",{className:"text-sm text-white",children:["Status: ",(0,r.jsx)("span",{className:"text-zinc-400",children:w.promotion_decision})]}),w.promotion_reason&&(0,r.jsx)("p",{className:"text-sm text-zinc-400 mt-2",children:w.promotion_reason})]})]})})]}),(0,r.jsx)(p.eb,{improvement:w}),w.best_candidate_id&&w.baseline_prompt_id&&(0,r.jsxs)(d.Zp,{children:[(0,r.jsx)(d.aR,{children:(0,r.jsx)(d.ZB,{className:"text-white",children:"Version Comparison"})}),(0,r.jsx)(d.Wu,{children:I?(0,r.jsxs)("div",{className:"flex items-center justify-center py-8",children:[(0,r.jsx)(u.A,{className:"h-6 w-6 animate-spin text-zinc-400"}),(0,r.jsx)("span",{className:"ml-2 text-zinc-400",children:"Loading diff..."})]}):y?(0,r.jsx)(p.Mh,{diff:y}):(0,r.jsx)("div",{className:"text-center py-8",children:(0,r.jsx)("p",{className:"text-zinc-400",children:"Diff not available. Versions may have been deleted or diff endpoint unavailable."})})})]}),(0,r.jsxs)(d.Zp,{children:[(0,r.jsx)(d.aR,{children:(0,r.jsx)(d.ZB,{className:"text-white",children:"Next Steps"})}),(0,r.jsx)(d.Wu,{children:(0,r.jsxs)("div",{className:"flex gap-4",children:["promoted"===w.promotion_decision&&(0,r.jsx)(f(),{href:`/prompts/${encodeURIComponent(e)}`,children:(0,r.jsx)(o.$,{variant:"outline",children:"View Updated Prompt"})}),(0,r.jsx)(f(),{href:`/prompts/${encodeURIComponent(e)}`,children:(0,r.jsx)(o.$,{variant:"outline",children:"View Prompt Details"})}),(0,r.jsx)(o.$,{variant:"outline",onClick:()=>{_(null),z(null)},children:"Run Another Improvement"})]})})]})]})]})})}function b(){return(0,r.jsx)(a.Suspense,{fallback:(0,r.jsx)("div",{className:"min-h-screen bg-gradient-to-b from-zinc-900 to-black",children:(0,r.jsx)("div",{className:"mx-auto max-w-4xl px-4 py-12 sm:px-6 lg:px-8",children:(0,r.jsx)(d.Zp,{className:"p-6",children:(0,r.jsxs)("div",{className:"flex items-center justify-center py-8",children:[(0,r.jsx)(u.A,{className:"h-6 w-6 animate-spin text-zinc-400"}),(0,r.jsx)("span",{className:"ml-2 text-zinc-400",children:"Loading..."})]})})})}),children:(0,r.jsx)(j,{})})}},7722:(e,t,s)=>{"use strict";s.d(t,{p:()=>n});var r=s(5512),a=s(8009),i=s(4195);let n=a.forwardRef(({className:e,type:t,...s},a)=>(0,r.jsx)("input",{type:t,className:(0,i.cn)("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-base shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:a,...s}));n.displayName="Input"},7271:(e,t,s)=>{"use strict";s.d(t,{J:()=>m});var r=s(5512),a=s(8009);s(5740);var i=s(9383),n=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"].reduce((e,t)=>{let s=a.forwardRef((e,s)=>{let{asChild:a,...n}=e,o=a?i.DX:t;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,r.jsx)(o,{...n,ref:s})});return s.displayName=`Primitive.${t}`,{...e,[t]:s}},{}),o=a.forwardRef((e,t)=>(0,r.jsx)(n.label,{...e,ref:t,onMouseDown:t=>{t.target.closest("button, input, select, textarea")||(e.onMouseDown?.(t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));o.displayName="Label";var d=s(1643),l=s(4195);let c=(0,d.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),m=a.forwardRef(({className:e,...t},s)=>(0,r.jsx)(o,{ref:s,className:(0,l.cn)(c(),e),...t}));m.displayName=o.displayName},1066:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>r});let r=(0,s(6760).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/Users/shraddharao/Development/code/Work/headstarter/Self-Improving-Prompt-Optimization-API/frontend/src/app/prompts/improve/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/shraddharao/Development/code/Work/headstarter/Self-Improving-Prompt-Optimization-API/frontend/src/app/prompts/improve/page.tsx","default")},1894:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(4825).A)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},6753:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(4825).A)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])}};var t=require("../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[638,8,77,95],()=>s(5506));module.exports=r})();