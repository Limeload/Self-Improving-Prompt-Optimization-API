(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[176],{9587:(e,s,t)=>{Promise.resolve().then(t.bind(t,5865))},6046:(e,s,t)=>{"use strict";var a=t(6658);t.o(a,"useParams")&&t.d(s,{useParams:function(){return a.useParams}}),t.o(a,"usePathname")&&t.d(s,{usePathname:function(){return a.usePathname}}),t.o(a,"useSearchParams")&&t.d(s,{useSearchParams:function(){return a.useSearchParams}})},5865:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>g});var a=t(5155),l=t(2115),r=t(6046),i=t(1410),n=t(3312),c=t(9749),d=t(3900),o=t(4887),x=t(2849),m=t(5086),u=t(1598),p=t(2517),h=t(1342),v=t(654),f=t(2783),j=t(8173),b=t.n(j);function N(){let e=(0,r.useSearchParams)(),[s,t]=(0,l.useState)(""),[f,j]=(0,l.useState)(""),[N,g]=(0,l.useState)([]),[w,y]=(0,l.useState)([]),[z,_]=(0,l.useState)(null),[S,P]=(0,l.useState)(!1),[E,k]=(0,l.useState)(!1),[R,A]=(0,l.useState)(!1),{toast:C}=(0,x.dj)();(0,l.useEffect)(()=>{let s=null==e?void 0:e.get("prompt");s&&t(decodeURIComponent(s)),F(),Z()},[e]);let F=async()=>{try{k(!0);let e=await i.u.prompts.list().catch(()=>[]);g(e)}catch(e){}finally{k(!1)}},Z=async()=>{try{A(!0);let e=await i.u.datasets.list().catch(()=>[]);y(e)}catch(e){}finally{A(!1)}},D=async()=>{if(!s){C({title:"Error",description:"Please enter a prompt name",variant:"destructive"});return}try{P(!0);let e={dataset_id:f?parseInt(f):void 0,evaluation_dimensions:["correctness","format","verbosity","safety","consistency"]},t=await i.u.evaluations.evaluate(s,e);_(t),C({title:"Success",description:"Evaluation completed. Score: ".concat((t.overall_score||0).toFixed(2))})}catch(e){C({title:"Error",description:e instanceof Error?e.message:"Failed to evaluate prompt",variant:"destructive"})}finally{P(!1)}};return(0,a.jsx)("div",{className:"min-h-screen bg-gradient-to-b from-zinc-900 to-black",children:(0,a.jsxs)("div",{className:"mx-auto max-w-4xl px-4 py-12 sm:px-6 lg:px-8",children:[(0,a.jsxs)(b(),{href:"/prompts",className:"mb-6 inline-flex items-center text-zinc-400 hover:text-white",children:[(0,a.jsx)(u.A,{className:"mr-2 h-4 w-4"}),"Back to Prompts"]}),(0,a.jsx)("h1",{className:"mb-8 text-3xl font-bold text-white",children:"Evaluate Prompt"}),(0,a.jsx)(c.Zp,{className:"mb-8 p-6",children:(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(o.J,{htmlFor:"promptName",className:"text-white",children:"Prompt *"}),E?(0,a.jsx)("div",{className:"mt-1 p-2 bg-zinc-800 text-zinc-400 rounded-md",children:"Loading prompts..."}):N.length>0?(0,a.jsxs)("select",{id:"promptName",value:s,onChange:e=>t(e.target.value),className:"mt-1 w-full rounded-md bg-zinc-800 p-2 text-white",required:!0,children:[(0,a.jsx)("option",{value:"",children:"Select a prompt..."}),N.map(e=>(0,a.jsxs)("option",{value:e.name,children:[e.name," (v",e.version,") - ",e.status]},e.id))]}):(0,a.jsx)(d.p,{id:"promptName",value:s,onChange:e=>t(e.target.value),placeholder:"e.g., sentiment_analyzer",className:"mt-1 bg-zinc-800 text-white",required:!0}),(0,a.jsx)("p",{className:"mt-1 text-xs text-zinc-500",children:"Select a prompt to evaluate"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(o.J,{htmlFor:"datasetId",className:"text-white",children:"Dataset (optional)"}),R?(0,a.jsx)("div",{className:"mt-1 p-2 bg-zinc-800 text-zinc-400 rounded-md",children:"Loading datasets..."}):w.length>0?(0,a.jsxs)("select",{id:"datasetId",value:f,onChange:e=>j(e.target.value),className:"mt-1 w-full rounded-md bg-zinc-800 p-2 text-white",children:[(0,a.jsx)("option",{value:"",children:"No dataset (evaluate with default test cases)"}),w.map(e=>(0,a.jsxs)("option",{value:e.id.toString(),children:[e.name," (",e.entry_count," entries)",e.description&&" - ".concat(e.description)]},e.id))]}):(0,a.jsx)("div",{className:"mt-1 p-3 bg-zinc-900/50 border border-zinc-800 rounded-md",children:(0,a.jsx)("p",{className:"text-sm text-zinc-400",children:"No datasets available. You can evaluate without a dataset, or create one first."})}),(0,a.jsx)("p",{className:"mt-1 text-xs text-zinc-500",children:"Optional: Select a dataset to evaluate against. If not selected, default test cases will be used."})]}),(0,a.jsxs)(n.$,{onClick:D,disabled:S,className:"w-full bg-white text-black hover:bg-zinc-200",children:[(0,a.jsx)(p.A,{className:"mr-2 h-4 w-4"}),S?"Evaluating...":"Evaluate"]})]})}),z&&(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)(c.Zp,{children:[(0,a.jsx)(c.aR,{children:(0,a.jsx)(c.ZB,{className:"text-white",children:"Evaluation Summary"})}),(0,a.jsxs)(c.Wu,{children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4 mb-6",children:[(0,a.jsx)(m.wr,{label:"Overall Score",value:z.overall_score||0,variant:(z.overall_score||0)>=.8?"success":(z.overall_score||0)>=.6?"warning":"danger"}),(0,a.jsx)(m.wr,{label:"Correctness",value:z.correctness_score||0,variant:"default"}),(0,a.jsx)(m.wr,{label:"Format",value:z.format_score||0,variant:"default"}),(0,a.jsx)(m.wr,{label:"Verbosity",value:z.verbosity_score||0,variant:"default"}),(0,a.jsx)(m.wr,{label:"Safety",value:z.safety_score||0,variant:"default"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 pt-4 border-t border-zinc-800",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-xs text-zinc-400 mb-1",children:"Total Examples"}),(0,a.jsx)("p",{className:"text-xl font-bold text-white",children:z.total_examples})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-xs text-zinc-400 mb-1",children:"Passed"}),(0,a.jsxs)("p",{className:"text-xl font-bold text-green-400 flex items-center gap-2",children:[(0,a.jsx)(h.A,{className:"h-4 w-4"}),z.passed_examples]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-xs text-zinc-400 mb-1",children:"Failed"}),(0,a.jsxs)("p",{className:"text-xl font-bold text-red-400 flex items-center gap-2",children:[(0,a.jsx)(v.A,{className:"h-4 w-4"}),z.failed_examples]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-xs text-zinc-400 mb-1",children:"Format Pass Rate"}),(0,a.jsxs)("p",{className:"text-xl font-bold text-white",children:[(100*(z.format_pass_rate||0)).toFixed(1),"%"]})]})]})]})]}),z.results&&z.results.length>0?(0,a.jsxs)(c.Zp,{children:[(0,a.jsx)(c.aR,{children:(0,a.jsx)(c.ZB,{className:"text-white",children:"Per-Example Results"})}),(0,a.jsx)(c.Wu,{children:(0,a.jsx)(m.t,{results:z.results,showDetails:!0})})]}):(0,a.jsxs)(c.Zp,{children:[(0,a.jsx)(c.aR,{children:(0,a.jsx)(c.ZB,{className:"text-white",children:"Per-Example Results"})}),(0,a.jsx)(c.Wu,{children:(0,a.jsx)("p",{className:"text-zinc-400 text-center py-4",children:"No detailed results available. The evaluation may not have included per-example results."})})]}),z.failure_cases&&z.failure_cases.length>0&&(0,a.jsxs)(c.Zp,{children:[(0,a.jsx)(c.aR,{children:(0,a.jsx)(c.ZB,{className:"text-white",children:"Failure Cases"})}),(0,a.jsx)(c.Wu,{children:(0,a.jsxs)("div",{className:"space-y-4",children:[z.failure_cases.slice(0,10).map((e,s)=>(0,a.jsx)("div",{className:"p-4 bg-red-950/20 border border-red-500/30 rounded",children:(0,a.jsx)("pre",{className:"text-xs font-mono text-zinc-300 overflow-x-auto",children:JSON.stringify(e,null,2)})},s)),z.failure_cases.length>10&&(0,a.jsxs)("p",{className:"text-sm text-zinc-400 text-center",children:["... and ",z.failure_cases.length-10," more failure cases"]})]})})]})]})]})})}function g(){return(0,a.jsx)(l.Suspense,{fallback:(0,a.jsx)("div",{className:"min-h-screen bg-gradient-to-b from-zinc-900 to-black",children:(0,a.jsx)("div",{className:"mx-auto max-w-4xl px-4 py-12 sm:px-6 lg:px-8",children:(0,a.jsx)(c.Zp,{className:"p-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-center py-8",children:[(0,a.jsx)(f.A,{className:"h-6 w-6 animate-spin text-zinc-400"}),(0,a.jsx)("span",{className:"ml-2 text-zinc-400",children:"Loading..."})]})})})}),children:(0,a.jsx)(N,{})})}},3900:(e,s,t)=>{"use strict";t.d(s,{p:()=>i});var a=t(5155),l=t(2115),r=t(1567);let i=l.forwardRef((e,s)=>{let{className:t,type:l,...i}=e;return(0,a.jsx)("input",{type:l,className:(0,r.cn)("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-base shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:s,...i})});i.displayName="Input"},4887:(e,s,t)=>{"use strict";t.d(s,{J:()=>x});var a=t(5155),l=t(2115);t(7650);var r=t(1290),i=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"].reduce((e,s)=>{let t=l.forwardRef((e,t)=>{let{asChild:l,...i}=e,n=l?r.DX:s;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,a.jsx)(n,{...i,ref:t})});return t.displayName=`Primitive.${s}`,{...e,[s]:t}},{}),n=l.forwardRef((e,s)=>(0,a.jsx)(i.label,{...e,ref:s,onMouseDown:s=>{var t;s.target.closest("button, input, select, textarea")||(null===(t=e.onMouseDown)||void 0===t||t.call(e,s),!s.defaultPrevented&&s.detail>1&&s.preventDefault())}}));n.displayName="Label";var c=t(1027),d=t(1567);let o=(0,c.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),x=l.forwardRef((e,s)=>{let{className:t,...l}=e;return(0,a.jsx)(n,{ref:s,className:(0,d.cn)(o(),t),...l})});x.displayName=n.displayName},1598:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(4057).A)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},2783:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(4057).A)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])}},e=>{var s=s=>e(e.s=s);e.O(0,[173,440,61,441,517,358],()=>s(9587)),_N_E=e.O()}]);